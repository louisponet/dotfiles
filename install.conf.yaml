- defaults:
    link:
      create: true
      relink: true
- clean: ['~']

- link:
    ~/.gitconfig: gitconfig
    ~/.tmux.conf: tmux/tmux.conf
    ~/.tmux: tmux/tmux
    ~/.tmux-themepack: tmux/tmux-themepack
    ~/.config/i3: i3
    ~/bin/julia: bin/julia
    ~/.julia/config/startup.jl: julia/startup.jl
    ~/.config/fish: fish
    ~/.config/kitty: kitty
    ~/.config/kak-lsp: kak-lsp
    ~/.config/kak: kak
    ~/.local/share/omf: omf

- sudo:
  - if:
    - cond: 'command -v pacman'
      met:
        - shell:
            - [pacman -Syy, updating pacman]
            - pacman -S --noconfirm fish
            - pacman -S --noconfirm tmux
            - pacman -S --noconfirm git
            - pacman -S --noconfirm btop
            - pacman -S --noconfirm lazygit
            - pacman -S --noconfirm kitty
    - cond: 'command -v apt'
      met:
        - shell:
          - apt -y install fish
          - apt -y install tmux
          - apt -y install git
          - apt -y install btop
          - apt -y install lazygit
          - apt -y install kitty
  - shell:
      - chsh -s $(which fish)

- create:
    - ~/Software
    - ~/bin

- if:
    cond: command -v kak &> /dev/null
    unmet:
      - git:
          '~/Software/kakoune':
            url: 'https://github.com/mawww/kakoune'
            branch: v2023.08.05
      - shell:
          - [scripts/compile_kakoune, compile kakoune]
- if:
    cond: command -v cargo &> /dev/null
    unmet:
      - shell:
          - [scripts/install, installing rust]
- if:
    cond: ls ~/.dotfiles_local/ &> /dev/null
    met:
      - shell:
          - [~/.dotfiles_local/install, installing local dotfiles]
